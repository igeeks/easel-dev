<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Easel-dev by inventables</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Easel-dev</h1>
        <p>Easel Developer Docs</p>

        <p class="view"><a href="https://github.com/inventables/easel-dev">View the Project on GitHub <small>inventables/easel-dev</small></a></p>


        <ul>
          <li><a href="https://github.com/inventables/easel-dev/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/inventables/easel-dev/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/inventables/easel-dev">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="executor-function" class="anchor" href="#executor-function" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Executor Function</h1>

<p>The executor function takes 3 arguments.</p>

<pre><code>args:
  params: Object // The user-defined parameters your app exposes, see below
  material:
    name: String // Name of active material
    textureUrl: String // URL of material thumbnail image
    dimensions:
      x: number // Width of material in inches
      y: number // Length of material in inches
      z: number // Height of material in inches
  bitParams:
    bit:
      id: String // Identifier for the bit
      width: Number // Width of the bit
      unit: String ("mm" or "in") // Units the width is expressed in
    detailBit:   // Not present if only using 1 bit
      id: String // Identifier for the detail bit
      width: Number // Width of the detail bit
      unit: String ("mm" or "in") // Units the width is expressed in
  volumes: Array // The objects defined in the design, ordered from back to front (see below for more)
  selectedVolumeIds: Array // String ids of volumes currently selected in the design
</code></pre>

<p>The <code>params</code> object will have a shape matching the properties that your app gives the user to manipulate. For example, if you make two Number properties named "Width" and "Height" available, then you would receive a params object like this:</p>

<pre><code>params:
  Width: Number
  Height: Number
</code></pre>

<p>A user's design is represented by <code>volume</code> objects in Easel. We call them <code>volumes</code> because they represent a three dimensional volume of material to be removed from the work piece. In the array given to your app, volumes are ordered from back to front as the user looks at their canvas. Therefore, the last volume is in front of all other volumes, and the first volume is behind all other volumes. Front-to-back ordering is important in Easel because it affects how volumes get carved out:</p>

<ol>
<li>A (filled) volume whose cut depth is shallower than a volume behind it will "lift" material out of the volume behind it</li>
<li>A volume whose cut depth is deeper than an object behind it will "push" material down into that shape</li>
<li>Volumes can't "raise" or "push" on volumes in front of them</li>
</ol>

<p>Basically, in terms of cut depth, each volume in the array overrides all overlapping volumes that came before it.</p>

<p>Properties that are shared across all volumes are:</p>

<pre><code>volume:
  shape:
    type: String // "rectangle", "ellipse", "polygon", "path", "polyline", "line"
    flipping: // May be undefined, which is the same as x/y false
      x: Boolean // True if the shape is "flipped" horizontally
      y: Boolean // True if the shape is "flipped" vertically
    center: // Most shapes (except Lines) have a center
      x: Number // Absolute horizontal position in inches of the shape's center, relative to the zero point
      y: Number // Absolute vertical position in inches of the shape's center, relative to the zero point
    width: Number    // Width in inches of the shape
    height: Number   // Height in inches of the shape
    rotation: Number // Amount of counter-clockwise rotation in radians
  cut:
    depth: Number // Depth of cut for this shape in inches
    type: String ('outline' or 'fill') // Type of cut
    outlineStyle: String ('on-path', 'outside', 'inside') // Outline style, if outline cut
    tabPreference: Boolean // Whether the user wants to use tabs, if cut-through outline cut
    tabHeight: Number // Height (from bottom of material) of tabs in inches
    tabLength: Number // Length of tabs in inches
    tabs: Array // Objects with a shape of {center: {x: Number, y: Number}} representing the center location of the tabs
</code></pre>

<p>In addition, shapes often have some properties specific to their type:</p>

<p>Polygon (including Triangles)</p>

<pre><code>shape:
  points: Array
</code></pre>

<p>Where each point in the array has the following shape:</p>

<pre><code>{
  x: Number // Horizontal position of point
  y: Number // Vertical position of point
}
</code></pre>

<p>Path</p>

<pre><code>shape:
  points: Array
</code></pre>

<p>Where each point in the array has the following shape:</p>

<pre><code>{
  x: Number // Horizontal position of point
  y: Number // Vertical position of point
  lh: // Optional "left handle"
    x: Number // Horizontal position of left handle RELATIVE to the point
    y: Number // Vertical position of left handle RELATIVE to the point
  rh: // Optional "right handle"
    x: Number // Horizontal position of right handle RELATIVE TO THE POINT
    y: Number // Vertical position of right handle RELATIVE TO THE POINT
}
</code></pre>

<p>Points will have handles if the path curves around them (on one side or the other). The handles represent the (relative) locations of bezier control points. In the v2 apps API, Easel provides functions to map from an Easel path to an SVG path.</p>

<h1>
<a id="responses" class="anchor" href="#responses" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Responses</h1>

<p>Easel passes 2 additional arguments to your app: a <code>success</code> callback and a <code>failure</code> callback.</p>

<p>If your app is able to function properly and produce output, it should invoke the <code>success</code> callback, passing an array of volumes having the same structure as above. The only wrinkle is with how to handle the update model--whether you want to add, replace, or remove volumes from the existing design.</p>
<p>
<strong>Add volumes:</strong> If you want to add new volumes to the design, leave the "id" field of the volumes blank in your response
<strong>Replace volumes:</strong> If you want to replace a volume, pass the "id" of the existing volume with its new data
<strong>Remove volumes:</strong> If you want to remove a volume, pass the "id" of the existing volume with no shape or cut data
</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/inventables">inventables</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
